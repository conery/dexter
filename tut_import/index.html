<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Import CSV Files - Dexter</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
        <link href="../css/dex.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Import CSV Files";
        var mkdocs_page_input_path = "tut_import.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Dexter
        </a>
        <div class="version">
          Version 0.0.5
        </div><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Introduction</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="..">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../history/">History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../deb/">Double Entry Bookkeeping</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../philosophy/">Philosophy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../envelopes/">Envelope Budgeting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../command_line/">Command Line API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../workflow/">Workflow</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Installation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../dex_install/">Dexter</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../db_server/">Database Server</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorial</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../folder/">Create Your Project Directory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dex/">Shell Command</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tut_init/">Initialize the Database</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Import CSV Files</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#file-names">File Names</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#preview-the-april-transactions">Preview the April Transactions</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#verify-the-output">Verify the Output</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#import-the-april-transactions">Import the April Transactions</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#save-may-for-later">Save May for Later</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#csv-transactions-are-saved-as-postings">CSV Transactions Are Saved As Postings</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tut_regexp/">Import Regular Expressions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tut_pair/">Pair Entries</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tut_review/">Review Unpaired Entries</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tut_select/">Select Transactions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tut_report/">Print Reports</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tut_fill/">Fill Envelopes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tut_income/">Review Income</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tut_recap/">Recap</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">User Documentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../config/">Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../options/">Command Line Options</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../accounts/">Defining Accounts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../regexp/">Regular Expressions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dex_init/">dex init</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dex_import/">dex import</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dex_pair/">dex pair</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dex_review/">dex review</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dex_select/">dex select</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dex_report/">dex report</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dex_save/">dex save</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dex_restore/">dex restore</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">The Budget Model</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../envelopes_dex/">Envelope Budgeting with Dexter</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../balances/">Account Balances</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../budget_trans/">Budget Transactions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../balance_expenses/">Expense Account Balances</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../balance_income/">Income Account Balances</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fill_date/">Fill Date</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../adjustments/">Adjustments</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../equity/">Using the Equity Account</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../nominal/">Nominal Accounts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../recap/">Recap</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Dexter and hledger</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../hledger/">Notes for hledger Users</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../api/">Database API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../modules/">Modules</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../parsers/">Parsers</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Dexter</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Tutorial</li>
      <li class="breadcrumb-item active">Import CSV Files</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/conery/dexter/edit/master/docs/tut_import.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="import-csv-files">Import CSV Files</h1>
<p>Now that we have the database set up with account names we're ready to import some data.</p>
<p>The first step in your monthly workflow will be to connect to your banks and other financial institutions and download all of your transactions.
The sample data for this tutorial in the <code>Downloads</code> section of the project folder:</p>
<pre><code class="language-plain">Finances
...
├── Downloads
│   ├── apr
│   │   ├── chase.csv
│   │   ├── checking.csv
│   │   └── savings.csv
│   └── may
│       ├── chase.csv
│       ├── checking.csv
│       └── savings.csv
</code></pre>
<p>The general form of the <code>import</code> command is</p>
<pre><code class="language-bash">$ dex import F1 F2 ...
</code></pre>
<p>where the names following <code>import</code> are the names of the files to import.</p>
<p>In our case, the April data is all in one folder, and we want to import all of the files, so we can just type <code>Downloads/apr/*</code>.</p>
<!-- The subfolder for `may` has the same three files, but now the transactions are for two months, April and May of 2024.
The idea is to illustrate how Dexter avoids importing duplicate transactions, and to provide an example of the process we suggest for managing downloads:

* connect to the financial institution's web site

* select an account, download all transactions, using the "year to date" option

* find the file in your Downloads folder, rename it, and move it to the downloads section of your project folder

Selecting "year to date" is simpler than specifying a date range (and remembering which transactions you have already downloaded).
But the main benefit is having a full record of all downloads in a single file that is always up to date for each account. -->

<h2 id="file-names">File Names</h2>
<p>An important detail to note here is that the base name of each CSV file matches the abbreviated name of one of the accounts.
That's how Dexter knows which account name to use for the new postings it is about to create:  records in <code>chase.csv</code> will be assigned to <code>liabilities:visa:chase</code>, and so on.</p>
<p>Your typical monthly workflow will probably be something like this:</p>
<ul>
<li>
<p>connect to a financial institution's web site</p>
</li>
<li>
<p>select an account, download all transactions</p>
</li>
<li>
<p>find the file in your Downloads folder, rename it, and move it to the downloads section of your project folder</p>
</li>
</ul>
<p>It is possible to use a different naming convention, but then files need to be imported one at a time, using the <code>-account</code> option to tell Dexter which account to use, <em>e.g.</em></p>
<pre><code class="language-bash">$ dex import --account chase ~/Downloads/ChaseXXXX_Activity20240101_20240525_20240525.CSV
</code></pre>
<blockquote>
<p><em><strong>Note</strong></em>: an item high on our TO DO list is to import CSV files downloaded from an aggregator, in which case the account name must be one of the columns in the data file.</p>
</blockquote>
<h2 id="preview-the-april-transactions">Preview the April Transactions</h2>
<p>As a first step we recommend running the command in preview mode.
Dexter will parse the files and print the records it will import on the terminal.
It's a good way to make sure you're getting the data you expect and to work out any problems with file names or other issues.</p>
<p>Here it the command to preview the CSV files for April:</p>
<pre><code class="language-shell">$ dex --pre import Downloads/apr/*
</code></pre>
<h2 id="verify-the-output">Verify the Output</h2>
<p>The output will be shown in sections, one for each input file.
A section will start with a log message that looks like this, with the name of the file that will be processed:</p>
<pre><code class="language-plain">INFO     Parsing Downloads/apr/chase.csv
</code></pre>
<p>Next are a series of lines, with one line for each CSV record:</p>
<pre><code class="language-plain">2024-04-26            $15.00   visa   LONGS MEAT MARKET           #unpaired
2024-04-24            $15.00   visa   NEWMAN'S FISH COMPANY       #unpaired
2024-04-23           $100.00   visa   EUGENE WATER AND ELECTRIC   #unpaired
...
</code></pre>
<p>Each of these lines will be saved in the database as a posting.
The important information to look for is the date, amount, account, and description.
The account shown here will be the full account name.  Dexter uses the name of the file (in this case, <code>visa.csv</code>) to figure out which account to use (<code>visa</code> is the abbreviation for <code>liabilities:chase:visa</code>).</p>
<blockquote>
<p><em><strong>Note:</strong>  When you define your own parser you will be making heavy use of preview mode.</em>
<em>This is where you will be able to make sure your parser is extracting the right information from the CSV file.</em></p>
</blockquote>
<h2 id="import-the-april-transactions">Import the April Transactions</h2>
<p>When everything looks OK, run the same shell command, but without the <code>--preview</code> option:</p>
<pre><code class="language-shell">$ dex --db dev import Downloads/apr/*
INFO     Parsing Downloads/apr/chase.csv
INFO     Parsing Downloads/apr/checking.csv
INFO     Parsing Downloads/apr/savings.csv 
</code></pre>
<p>Printing the status of the database should show the new data have been added:</p>
<pre><code class="language-shell">$ dex info

Databases                                                 
┏━━━━━━━━━━━━━━┳━━━━━━━━━┳━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━┓
┃ name         ┃ account ┃ transaction ┃ entry ┃ reg_exp ┃
┡━━━━━━━━━━━━━━╇━━━━━━━━━╇━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━┩
│ dev          │      18 │           2 │    32 │       0 │
└──────────────┴─────────┴─────────────┴───────┴─────────┘
</code></pre>
<p>Before there were 4 postings, now there are 32.</p>
<h4 id="save-may-for-later">Save May for Later</h4>
<p>If you want you can repeat the steps above for the data in the folder for May.
But we recommend waiting until you have worked through the complete tutorial.
You'll have a smaller and more manageable set of data for each step if you use only the April data the first time through.</p>
<h2 id="csv-transactions-are-saved-as-postings">CSV Transactions Are Saved As Postings</h2>
<p>The output from the <code>info</code> command brings up an important point about terminology.</p>
<p>From the financial institution's perspective, the word "transaction" means "an event that updated the balance of your account", such as a purchase or a deposit.
The web site will show a table of transactions, and most likely the command to save them has a name like "download transactions".</p>
<p>Each transaction from the financial institution will become a single line in the CSV file.
So when we wrote above "Preview the April Transactions" we meant "preview the records in the CSV download for April."</p>
<p>From Dexter's perspective, however, the word "transaction" has the meaning used in double-entry bookkeeping.
A transaction is a transfer of money between two (or more) accounts.
Each CSV record becomes a <strong>posting</strong> in the database.
So from now on, when we refer to the data we just imported, we will use the DEB terminology and call these items postings.</p>
<p>The next step in the expense tracking workflow is to create transactions by pairing the new postings.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../tut_init/" class="btn btn-neutral float-left" title="Initialize the Database"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../tut_regexp/" class="btn btn-neutral float-right" title="Import Regular Expressions">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy 2025 John Conery</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/conery/dexter" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../tut_init/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../tut_regexp/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
